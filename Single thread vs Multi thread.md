# <b>싱글 스레드 vs 멀티 스레드</b>
![image](https://media.vlpt.us/images/gil0127/post/540376e9-9eb4-46d8-9cff-816a1d9cce1f/%EC%8B%B1%EA%B8%80%20vs%20%EB%A9%80%ED%8B%B0.png)


# <b>스레드란??</b>
- 프로세스가 할당받은 자원을 이용하는 실행의 단위

- 한 프로세스 내에서 동작되는 여러 실행 흐름으로 프로세스 내의 `Heap`, `Data`, `Code` 영역을 공유(*멀티 스레드*)

- 하나의 프로세스를 안에서 다양한 작업을 담당하는 최소 실행 단위
  - ex) chrome (=프로세스)에서 벨로그 작성(=스레드1) 그리고 유튜브 시청(=스레드2)

- 멀티 스레드의 경우, 스레드 간의 자원을 공유하고 자원의 생성과 관리의 중복성 최소화해 수행능력 향상

- 각각의 스레드는 독립적인 작업을 수행해야 하기 때문에 고유한 스레드 ID, 프로그램 카운터, 레지스터 집합, 스택을 가짐

## <b>멀티 스레드</b>
> ***CPU의 최대 활용을 위해 프로그램의 둘 이상 동시에 실행하는 기술***

![image](https://media.vlpt.us/images/gil0127/post/813ea794-6eef-40b4-8042-09a8551082fd/multi.gif)

위에 그림처럼 context switching이 빠르게 일어나 유저 시선에서는 다른 프로그램들이 동시에 수행되는 것처럼 보인다.

### <b>멀티 스레드의 장점</b>

1. 응답성 : ***스레드 중 하나가 중단, 에러가 나거나 긴 작업을 수행하더라도 새로운 스레드를 생성해 극복***한다. 그러나 새로운 스레드 생성이나 아무 자업을 하지않는 스레드 처리에 대한 비용이 발생한다.

2. 경제성 :  프로세스 내 자원들과 메모리를 공유하기 때문에 메모리 공간과 시스템 자원 소모가 줄어든다.

3. 멀티 프로세서의 활용 : 다중 CPU구조에서 각각의 스레드가 다른 프로세서에서 병렬로 수행될 수 있으므로 병렬성이 증가한다.

### <b>멀티 스레드의 단점</b>

1. context switching, 동기화 등의 이유 때문에 ***싱글 코어 멀티 스레딩은 스레드 생성 시간이 오히려 오버헤드로 작용해 단일 스레드보다 느리다.***

2. 공유하는 자원에 동시에 접근하는 경우, 프로세스와는 달리 스레드는 데이터와 힙 영역을 공유하기 때문에 ***어떤 스레드가 다른 스레드에서 사용 중인 변수나 자료구조에 접근하여 엉뚱한 값을 읽어오거나 수정할 수 있으므로 동기화가 필요하다.***

3. 멀티 스레딩을 위해서 ***운영체제의 지원***이 필요하다.

4. ***멀티 스레드 모델은 프로그래밍 난이도가 높다.*** 또한, 스레드 수만큼 자원을 많이 사용한다.

## <b>싱글 스레드</b>
![image](https://media.vlpt.us/images/gil0127/post/e77bf094-c662-48ac-ad2e-530d9bd0f781/single.gif)

위에 그림처럼 하나의 프로세스에서 오직 하나의 스레드로만 실행한다. 따라서 하나의 레지스터, 스택으로 표현이 가능하다.

### <b>싱글 스레드의 장점</b>
1. context switch 작업을 요구하지 않는다.

2. 자원 접근에 대한 동기화를 신경쓰지 않아도 된다.

3. 단순히 CPU만을 사용하는 계산작업이면 멀티 스레드보다 싱글 스레드로 프로그래밍하는 것이 더 효율적이다.

4. 프로그래밍 난이도가 쉽고 CPU, 메모리를 적게 사용한다.

### <b>싱글 스레드의 단점</b>

1. 여러 개의 CPU를 활용하지 못한다.

2. 연산량이 많은 작업을 하는 경우, 그 작업이 완료되어야 다른 작업을 수행할 수 있다.

3. 싱글 스레드 모델은 에러 처리를 못하는 경우 멈춘다.

## <b>Node.js는 싱글 스레드???</b>

우선 자바스크립트는 ***싱글 스레드 언어***이다. <br>
그러나 ***node는 싱글 스레드가 아니고 여러 스레드를 가지고 있다.*** <br>
<br>
***자바스크립트를 실행하는 스레드는 단 하나이므로 node를 싱글 스레드라고 한다. 그리고 그 싱글 스레드가 바로 이벤트 루프이다.*** <br>
<br>
***node는 이벤트 기반의 플랫폼이기 때문에 이벤트가 발생할 때 미리 지정해둔 작업을 수행하는 방식으로 작동한다.***
